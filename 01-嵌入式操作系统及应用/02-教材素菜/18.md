# 福建信息职业技术学院教案（补充完整版）
|课程名称|嵌入式操作系统及应用|嵌入式操作系统及应用|授课日期||
|---|---|---|---|---|
|班    级|物联网2411|物联网2412|物联网2411|物联网2412|
|课堂类型|一体化|一体化|一体化|一体化|
|教    材|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|
|章节名称|基础开发<br/>TCP通信|基础开发<br/>TCP通信|基础开发<br/>TCP通信|基础开发<br/>TCP通信|
|**目的要求**|1. 知识目标：<br/>  - 理解TCP通信原理（客户端-服务端模型，可靠传输）；<br/>  - 掌握核心API（`socket()`创建套接字、`connect()`客户端连接、`listen()`服务端监听）功能；<br/>  - 明确WiFi配置（修改SSID/密码）与局域网IP匹配要求。<br/>2. 技能目标：<br/>  - 能创建`b7_wifi_tcp`文件夹，编写TCP客户端/服务端代码；<br/>  - 独立配置WiFi、修改`BUILD.gn`/`Makefile`，通过网络调试助手验证通信效果。<br/>3. 素养目标：<br/>  - 通过国产开发板TCP通信在物联网（如设备数据上报）的应用，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解TCP通信原理（客户端-服务端模型，可靠传输）；<br/>  - 掌握核心API（`socket()`创建套接字、`connect()`客户端连接、`listen()`服务端监听）功能；<br/>  - 明确WiFi配置（修改SSID/密码）与局域网IP匹配要求。<br/>2. 技能目标：<br/>  - 能创建`b7_wifi_tcp`文件夹，编写TCP客户端/服务端代码；<br/>  - 独立配置WiFi、修改`BUILD.gn`/`Makefile`，通过网络调试助手验证通信效果。<br/>3. 素养目标：<br/>  - 通过国产开发板TCP通信在物联网（如设备数据上报）的应用，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解TCP通信原理（客户端-服务端模型，可靠传输）；<br/>  - 掌握核心API（`socket()`创建套接字、`connect()`客户端连接、`listen()`服务端监听）功能；<br/>  - 明确WiFi配置（修改SSID/密码）与局域网IP匹配要求。<br/>2. 技能目标：<br/>  - 能创建`b7_wifi_tcp`文件夹，编写TCP客户端/服务端代码；<br/>  - 独立配置WiFi、修改`BUILD.gn`/`Makefile`，通过网络调试助手验证通信效果。<br/>3. 素养目标：<br/>  - 通过国产开发板TCP通信在物联网（如设备数据上报）的应用，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解TCP通信原理（客户端-服务端模型，可靠传输）；<br/>  - 掌握核心API（`socket()`创建套接字、`connect()`客户端连接、`listen()`服务端监听）功能；<br/>  - 明确WiFi配置（修改SSID/密码）与局域网IP匹配要求。<br/>2. 技能目标：<br/>  - 能创建`b7_wifi_tcp`文件夹，编写TCP客户端/服务端代码；<br/>  - 独立配置WiFi、修改`BUILD.gn`/`Makefile`，通过网络调试助手验证通信效果。<br/>3. 素养目标：<br/>  - 通过国产开发板TCP通信在物联网（如设备数据上报）的应用，强化民族自豪感与科技报国情怀。|
|**学情分析**|1. 基础：已掌握UART/OLED外设开发，具备C语言数组处理基础，但对网络编程（套接字、局域网）认知薄弱；<br/>2. 难点：易忽略WiFi SSID/密码配置错误、TCP函数调用顺序（如服务端未`bind`先`listen`）；<br/>3. 需求：需通过WiFi配置演示、通信错误排查降低难度。|1. 基础：已掌握UART/OLED外设开发，具备C语言数组处理基础，但对网络编程（套接字、局域网）认知薄弱；<br/>2. 难点：易忽略WiFi SSID/密码配置错误、TCP函数调用顺序（如服务端未`bind`先`listen`）；<br/>3. 需求：需通过WiFi配置演示、通信错误排查降低难度。|1. 基础：已掌握UART/OLED外设开发，具备C语言数组处理基础，但对网络编程（套接字、局域网）认知薄弱；<br/>2. 难点：易忽略WiFi SSID/密码配置错误、TCP函数调用顺序（如服务端未`bind`先`listen`）；<br/>3. 需求：需通过WiFi配置演示、通信错误排查降低难度。|1. 基础：已掌握UART/OLED外设开发，具备C语言数组处理基础，但对网络编程（套接字、局域网）认知薄弱；<br/>2. 难点：易忽略WiFi SSID/密码配置错误、TCP函数调用顺序（如服务端未`bind`先`listen`）；<br/>3. 需求：需通过WiFi配置演示、通信错误排查降低难度。|
|**重 难 点<br/>分    析**|1. 重点：<br/>  - WiFi配置：修改`config_network.c`的SSID/密码，确保开发板与PC同局域网；<br/>  - API应用：客户端（`socket()`→`connect()`→`send()`）、服务端（`socket()`→`bind()`→`listen()`→`accept()`）；<br/>  - 编译配置：修改`BUILD.gn`添加`./b7_wifi_tcp:wifi_tcp_example`，`Makefile`添加`-lwifi_tcp_example`。<br/>2. 难点：<br/>  - 通信逻辑：TCP客户端与服务端的连接时序（服务端先监听，客户端再连接）；<br/>  - 错误排查：WiFi连接失败（密码错误）、IP不匹配导致的通信超时。|1. 重点：<br/>  - WiFi配置：修改`config_network.c`的SSID/密码，确保开发板与PC同局域网；<br/>  - API应用：客户端（`socket()`→`connect()`→`send()`）、服务端（`socket()`→`bind()`→`listen()`→`accept()`）；<br/>  - 编译配置：修改`BUILD.gn`添加`./b7_wifi_tcp:wifi_tcp_example`，`Makefile`添加`-lwifi_tcp_example`。<br/>2. 难点：<br/>  - 通信逻辑：TCP客户端与服务端的连接时序（服务端先监听，客户端再连接）；<br/>  - 错误排查：WiFi连接失败（密码错误）、IP不匹配导致的通信超时。|1. 重点：<br/>  - WiFi配置：修改`config_network.c`的SSID/密码，确保开发板与PC同局域网；<br/>  - API应用：客户端（`socket()`→`connect()`→`send()`）、服务端（`socket()`→`bind()`→`listen()`→`accept()`）；<br/>  - 编译配置：修改`BUILD.gn`添加`./b7_wifi_tcp:wifi_tcp_example`，`Makefile`添加`-lwifi_tcp_example`。<br/>2. 难点：<br/>  - 通信逻辑：TCP客户端与服务端的连接时序（服务端先监听，客户端再连接）；<br/>  - 错误排查：WiFi连接失败（密码错误）、IP不匹配导致的通信超时。|1. 重点：<br/>  - WiFi配置：修改`config_network.c`的SSID/密码，确保开发板与PC同局域网；<br/>  - API应用：客户端（`socket()`→`connect()`→`send()`）、服务端（`socket()`→`bind()`→`listen()`→`accept()`）；<br/>  - 编译配置：修改`BUILD.gn`添加`./b7_wifi_tcp:wifi_tcp_example`，`Makefile`添加`-lwifi_tcp_example`。<br/>2. 难点：<br/>  - 通信逻辑：TCP客户端与服务端的连接时序（服务端先监听，客户端再连接）；<br/>  - 错误排查：WiFi连接失败（密码错误）、IP不匹配导致的通信超时。|
|信息化应用方法|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|
|思政元素<br/>融合设计|思政元素|融入方式|融入方式|融入方式|
||民族自豪感、<br/>科技报国情怀|1. 讲解小凌派-RK2206 TCP通信在国产物联网网关（设备数据透传）、智能监控终端的应用，说明国产开发板对网络协议的本土化适配优势；<br/>2. 对比国外开发板网络驱动的封闭性，强调鸿蒙系统“TCP/IP协议栈开源、WiFi驱动自主”的价值，引导学生认同国产嵌入式生态。|1. 讲解小凌派-RK2206 TCP通信在国产物联网网关（设备数据透传）、智能监控终端的应用，说明国产开发板对网络协议的本土化适配优势；<br/>2. 对比国外开发板网络驱动的封闭性，强调鸿蒙系统“TCP/IP协议栈开源、WiFi驱动自主”的价值，引导学生认同国产嵌入式生态。|1. 讲解小凌派-RK2206 TCP通信在国产物联网网关（设备数据透传）、智能监控终端的应用，说明国产开发板对网络协议的本土化适配优势；<br/>2. 对比国外开发板网络驱动的封闭性，强调鸿蒙系统“TCP/IP协议栈开源、WiFi驱动自主”的价值，引导学生认同国产嵌入式生态。|
|**作业布置**|1. 实操任务：<br/>  - 修改代码：将TCP服务端端口改为8888，实现“开发板客户端发送班级信息，PC服务端回复确认”，提交代码与调试助手截图；<br/>  - 优化功能：添加WiFi连接失败重连逻辑，验证稳定性。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙UDP通信”章节，了解`sendto()`与`recvfrom()`基本功能。|1. 实操任务：<br/>  - 修改代码：将TCP服务端端口改为8888，实现“开发板客户端发送班级信息，PC服务端回复确认”，提交代码与调试助手截图；<br/>  - 优化功能：添加WiFi连接失败重连逻辑，验证稳定性。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙UDP通信”章节，了解`sendto()`与`recvfrom()`基本功能。|1. 实操任务：<br/>  - 修改代码：将TCP服务端端口改为8888，实现“开发板客户端发送班级信息，PC服务端回复确认”，提交代码与调试助手截图；<br/>  - 优化功能：添加WiFi连接失败重连逻辑，验证稳定性。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙UDP通信”章节，了解`sendto()`与`recvfrom()`基本功能。|1. 实操任务：<br/>  - 修改代码：将TCP服务端端口改为8888，实现“开发板客户端发送班级信息，PC服务端回复确认”，提交代码与调试助手截图；<br/>  - 优化功能：添加WiFi连接失败重连逻辑，验证稳定性。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙UDP通信”章节，了解`sendto()`与`recvfrom()`基本功能。|
|参考资料|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|


|教学环节|教学内容|教师活动|学生活动|设计意图|
|---|---|---|---|---|
|课前|预习（30分钟）|1. 上传预习资料：<br/>  - TCP客户端-服务端通信动画、WiFi配置步骤视频；<br/>  - 核心API参数图解、局域网IP查询方法；<br/>2. 发布任务：标注`socket()`的协议类型参数，记录“TCP为何需要三次握手”的疑问。|1. 观看视频，记录WiFi配置路径；<br/>2. 提交预习疑问，在平台互动。|提前铺垫网络与WiFi基础，降低课中配置难度。|
|课中|课程介绍（5min）|1. 明确目标：掌握TCP通信与WiFi配置，理解国产开发板网络优势；<br/>2. 串联逻辑：从“物联网通信需求”到“TCP实现”，融入思政目标。|1. 记录核心目标；<br/>2. 提问“TCP通信还能用于哪些物联网场景”。|清晰学习方向，激发网络编程兴趣。|
||任务导入（10min）|1. 演示实验效果：<br/>  - 开发板连接WiFi，串口打印IP（如192.168.2.50）；<br/>  - 网络调试助手（PC服务端）与开发板（客户端）互发消息；<br/>2. 提问：“如何配置WiFi让开发板连网？TCP客户端与服务端如何配合？”|1. 观察WiFi连接与通信效果；<br/>2. 分组讨论，梳理“WiFi配置→TCP连接→数据收发”流程。|用直观通信效果激发探索欲，聚焦WiFi与TCP核心逻辑。|
||知识储备（15min）|1. 讲解核心知识：<br/>  - TCP原理：可靠传输，客户端-服务端模型（三次握手建立连接）；<br/>  - API解析：`socket(AF_INET, SOCK_STREAM, 0)`（TCP套接字）、`bind()`绑定IP端口、`accept()`阻塞等待连接；<br/>  - WiFi配置：修改`config_network.c`的SSID/密码，`ipconfig`查PC IP；<br/>2. 思政融入：穿插国产物联网设备（鸿蒙TCP驱动）应用案例，对比国外技术依赖。|1. 绘制“TCP通信流程图”；<br/>2. 标注WiFi配置关键代码路径。|夯实理论，结合实操配置降低抽象难度。|
||任务导入（5min）|1. 明确实操任务：创建`b7_wifi_tcp`文件夹，编写TCP通信代码；<br/>2. 强调易错点：WiFi密码大小写、TCP服务端先启动再连客户端。|1. 记录实操步骤；<br/>2. 标注“IP必须与PC同网段（如192.168.2.x）”。|明确任务边界，减少配置与代码失误。|
||知识储备（10min）|1. 补充细节：<br/>  - 代码结构：`wifi_client()`实现连接-发送，`wifi_server()`实现监听-接收；<br/>  - 配置语法：`BUILD.gn`与`Makefile`的库名、路径匹配；<br/>2. 错误演示：WiFi密码错误导致连网失败，展示串口“connect failed”日志。|1. 记录代码模板（如`struct sockaddr_in`初始化）；<br/>2. 练习根据日志排查WiFi连网问题。|补充实操细节，提升问题解决能力。|
||任务实施（40min）|1. 分步演示+指导：<br/>  ① 创建`b7_wifi_tcp`文件夹；<br/>  ② 修改`config_network.c`配置WiFi SSID/密码；<br/>  ③ 编写TCP客户端/服务端代码；<br/>  ④ 修改`BUILD.gn`和`Makefile`，烧写验证；<br/>  ⑤ 用网络调试助手建立连接，互发消息；<br/>2. 重点帮扶：解决WiFi连网失败、IP不匹配、TCP函数调用顺序错误。|1. 跟随操作，每步自查（WiFi配置、IP匹配）；<br/>2. 遇错先排查日志，再求助；<br/>3. 成功后用调试助手收发消息，截图记录。|通过实操突破重点，针对性解决难点。|
||任务总结（5min）|1. 梳理流程：WiFi配置→代码编写→编译烧写→通信验证；<br/>2. 强化重点：TCP函数调用顺序、WiFi-IP匹配；<br/>3. 思政升华：国产开发板在物联网TCP通信中的自主应用价值。|1. 补充流程笔记；<br/>2. 分享实操心得（如“WiFi密码错会导致连网失败，需重新配置”）。|巩固知识，深化思政认知。|
|作业|实操+预习|1. 在学习通发布作业：明确代码命名、调试助手截图要求；<br/>2. 提示下次课重点：UDP通信。|1. 记录作业要求；<br/>2. 规划完成时间。|验收成果，铺垫后续课程。|
|课后|资源推送+答疑|1. 上传PPT、实操视频、错误排查手册；<br/>2. 24小时内回复问题，汇总高频错误（如WiFi配置错、IP不匹配）。|1. 下载资源复盘；<br/>2. 提交疑问，查看解答。|提供复习支持，帮助查漏补缺。|