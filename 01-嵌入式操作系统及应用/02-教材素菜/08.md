
# 福建信息职业技术学院教案（补充完整版）
|课程名称|嵌入式操作系统及应用|嵌入式操作系统及应用|授课日期||
|---|---|---|---|---|
|班    级|物联网2411|物联网2412|物联网2411|物联网2412|
|课堂类型|一体化|一体化|一体化|一体化|
|教    材|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|
|章节名称|基础开发<br/>任务|基础开发<br/>任务|基础开发<br/>任务|基础开发<br/>任务|
|**目的要求**|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M内核的任务调度机制（抢占式调度+时间片轮转）；<br/>  - 掌握任务管理核心API（`LOS_TaskCreate()`创建任务、`LOS_TaskDelete()`删除任务）的参数、返回值及使用场景；<br/>  - 明确任务优先级范围（0-31，0/31为系统占用，用户可用1-30）。<br/>2. 技能目标：<br/>  - 能在开发板上创建任务开发文件夹，编写多任务代码；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证任务运行效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙系统任务管理功能的实操，结合国产软件在嵌入式领域的应用案例，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M内核的任务调度机制（抢占式调度+时间片轮转）；<br/>  - 掌握任务管理核心API（`LOS_TaskCreate()`创建任务、`LOS_TaskDelete()`删除任务）的参数、返回值及使用场景；<br/>  - 明确任务优先级范围（0-31，0/31为系统占用，用户可用1-30）。<br/>2. 技能目标：<br/>  - 能在开发板上创建任务开发文件夹，编写多任务代码；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证任务运行效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙系统任务管理功能的实操，结合国产软件在嵌入式领域的应用案例，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M内核的任务调度机制（抢占式调度+时间片轮转）；<br/>  - 掌握任务管理核心API（`LOS_TaskCreate()`创建任务、`LOS_TaskDelete()`删除任务）的参数、返回值及使用场景；<br/>  - 明确任务优先级范围（0-31，0/31为系统占用，用户可用1-30）。<br/>2. 技能目标：<br/>  - 能在开发板上创建任务开发文件夹，编写多任务代码；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证任务运行效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙系统任务管理功能的实操，结合国产软件在嵌入式领域的应用案例，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M内核的任务调度机制（抢占式调度+时间片轮转）；<br/>  - 掌握任务管理核心API（`LOS_TaskCreate()`创建任务、`LOS_TaskDelete()`删除任务）的参数、返回值及使用场景；<br/>  - 明确任务优先级范围（0-31，0/31为系统占用，用户可用1-30）。<br/>2. 技能目标：<br/>  - 能在开发板上创建任务开发文件夹，编写多任务代码；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证任务运行效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙系统任务管理功能的实操，结合国产软件在嵌入式领域的应用案例，强化民族自豪感与科技报国情怀。|
|**学情分析**|1. 基础：已掌握OpenHarmony Hello World开发流程（文件创建、编译烧写），具备C语言循环/函数基础，但对“任务调度机制”“API错误处理”认知薄弱；<br/>2. 难点：易混淆“抢占式调度”逻辑（如高优先级任务如何打断低优先级）、任务优先级数值含义（0最高/31最低）、`BUILD.gn`中编译路径的匹配；<br/>3. 需求：需通过“案例对比+错误演示”（如故意设错优先级看编译报错）降低抽象概念难度，强化实操中的问题排查能力。|1. 基础：已掌握OpenHarmony Hello World开发流程（文件创建、编译烧写），具备C语言循环/函数基础，但对“任务调度机制”“API错误处理”认知薄弱；<br/>2. 难点：易混淆“抢占式调度”逻辑（如高优先级任务如何打断低优先级）、任务优先级数值含义（0最高/31最低）、`BUILD.gn`中编译路径的匹配；<br/>3. 需求：需通过“案例对比+错误演示”（如故意设错优先级看编译报错）降低抽象概念难度，强化实操中的问题排查能力。|1. 基础：已掌握OpenHarmony Hello World开发流程（文件创建、编译烧写），具备C语言循环/函数基础，但对“任务调度机制”“API错误处理”认知薄弱；<br/>2. 难点：易混淆“抢占式调度”逻辑（如高优先级任务如何打断低优先级）、任务优先级数值含义（0最高/31最低）、`BUILD.gn`中编译路径的匹配；<br/>3. 需求：需通过“案例对比+错误演示”（如故意设错优先级看编译报错）降低抽象概念难度，强化实操中的问题排查能力。|1. 基础：已掌握OpenHarmony Hello World开发流程（文件创建、编译烧写），具备C语言循环/函数基础，但对“任务调度机制”“API错误处理”认知薄弱；<br/>2. 难点：易混淆“抢占式调度”逻辑（如高优先级任务如何打断低优先级）、任务优先级数值含义（0最高/31最低）、`BUILD.gn`中编译路径的匹配；<br/>3. 需求：需通过“案例对比+错误演示”（如故意设错优先级看编译报错）降低抽象概念难度，强化实操中的问题排查能力。|
|**重 难 点<br/>分    析**|1. 重点：<br/>  - API应用：`LOS_TaskCreate()`的参数配置（任务ID、初始化参数`TSK_INIT_PARAM_S`，含入口函数、堆栈2048、优先级24/25、任务名）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a1_kernal_task:task_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltask_example`；<br/>  - 结果验证：通过串口观察“task_one（1s/次）、task_two（2s/次）”的交替打印，理解抢占式调度。<br/>2. 难点：<br/>  - 调度机制理解：高优先级任务（24）如何打断低优先级任务（25）的运行逻辑（如task_one打印2次后，task_two才打印1次）；<br/>  - API错误处理：识别`LOS_TaskCreate()`的失败返回值（如`LOS_ERRNO_TSK_PRIOR_ERROR`代表优先级错误）；<br/>  - 配置文件关联：确保`BUILD.gn`的编译目标与`Makefile`的库名（`task_example`）一致。|1. 重点：<br/>  - API应用：`LOS_TaskCreate()`的参数配置（任务ID、初始化参数`TSK_INIT_PARAM_S`，含入口函数、堆栈2048、优先级24/25、任务名）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a1_kernal_task:task_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltask_example`；<br/>  - 结果验证：通过串口观察“task_one（1s/次）、task_two（2s/次）”的交替打印，理解抢占式调度。<br/>2. 难点：<br/>  - 调度机制理解：高优先级任务（24）如何打断低优先级任务（25）的运行逻辑（如task_one打印2次后，task_two才打印1次）；<br/>  - API错误处理：识别`LOS_TaskCreate()`的失败返回值（如`LOS_ERRNO_TSK_PRIOR_ERROR`代表优先级错误）；<br/>  - 配置文件关联：确保`BUILD.gn`的编译目标与`Makefile`的库名（`task_example`）一致。|1. 重点：<br/>  - API应用：`LOS_TaskCreate()`的参数配置（任务ID、初始化参数`TSK_INIT_PARAM_S`，含入口函数、堆栈2048、优先级24/25、任务名）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a1_kernal_task:task_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltask_example`；<br/>  - 结果验证：通过串口观察“task_one（1s/次）、task_two（2s/次）”的交替打印，理解抢占式调度。<br/>2. 难点：<br/>  - 调度机制理解：高优先级任务（24）如何打断低优先级任务（25）的运行逻辑（如task_one打印2次后，task_two才打印1次）；<br/>  - API错误处理：识别`LOS_TaskCreate()`的失败返回值（如`LOS_ERRNO_TSK_PRIOR_ERROR`代表优先级错误）；<br/>  - 配置文件关联：确保`BUILD.gn`的编译目标与`Makefile`的库名（`task_example`）一致。|1. 重点：<br/>  - API应用：`LOS_TaskCreate()`的参数配置（任务ID、初始化参数`TSK_INIT_PARAM_S`，含入口函数、堆栈2048、优先级24/25、任务名）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a1_kernal_task:task_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltask_example`；<br/>  - 结果验证：通过串口观察“task_one（1s/次）、task_two（2s/次）”的交替打印，理解抢占式调度。<br/>2. 难点：<br/>  - 调度机制理解：高优先级任务（24）如何打断低优先级任务（25）的运行逻辑（如task_one打印2次后，task_two才打印1次）；<br/>  - API错误处理：识别`LOS_TaskCreate()`的失败返回值（如`LOS_ERRNO_TSK_PRIOR_ERROR`代表优先级错误）；<br/>  - 配置文件关联：确保`BUILD.gn`的编译目标与`Makefile`的库名（`task_example`）一致。|
|信息化应用方法|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|
|思政元素<br/>融合设计|思政元素|融入方式|融入方式|融入方式|
||民族自豪感、<br/>科技报国情怀|1. 讲解鸿蒙LiteOS-M内核在国产嵌入式设备（如智能家居网关、工业传感器）中的应用案例，说明其任务管理功能对设备稳定性的支撑作用；<br/>2. 对比国外嵌入式操作系统（如FreeRTOS）的开源依赖，强调鸿蒙系统“自主可控”的优势，引导学生认同国产软件生态，树立科技报国意识。|1. 讲解鸿蒙LiteOS-M内核在国产嵌入式设备（如智能家居网关、工业传感器）中的应用案例，说明其任务管理功能对设备稳定性的支撑作用；<br/>2. 对比国外嵌入式操作系统（如FreeRTOS）的开源依赖，强调鸿蒙系统“自主可控”的优势，引导学生认同国产软件生态，树立科技报国意识。|1. 讲解鸿蒙LiteOS-M内核在国产嵌入式设备（如智能家居网关、工业传感器）中的应用案例，说明其任务管理功能对设备稳定性的支撑作用；<br/>2. 对比国外嵌入式操作系统（如FreeRTOS）的开源依赖，强调鸿蒙系统“自主可控”的优势，引导学生认同国产软件生态，树立科技报国意识。|
|**作业布置**|1. 实操任务：<br/>  - 修改任务代码：在`task_two`中添加`LOS_TaskDelete()`（删除自身或`task_one`），观察串口日志变化，提交修改后的代码及日志截图；<br/>  - 调整优先级：将`task_one`优先级改为26、`task_two`改为24，验证“低优先级任务被高优先级打断”的逻辑，记录实验结论。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信”章节，了解`LOS_QueueCreate()`（消息队列）的基本功能，为下次课程铺垫。|1. 实操任务：<br/>  - 修改任务代码：在`task_two`中添加`LOS_TaskDelete()`（删除自身或`task_one`），观察串口日志变化，提交修改后的代码及日志截图；<br/>  - 调整优先级：将`task_one`优先级改为26、`task_two`改为24，验证“低优先级任务被高优先级打断”的逻辑，记录实验结论。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信”章节，了解`LOS_QueueCreate()`（消息队列）的基本功能，为下次课程铺垫。|1. 实操任务：<br/>  - 修改任务代码：在`task_two`中添加`LOS_TaskDelete()`（删除自身或`task_one`），观察串口日志变化，提交修改后的代码及日志截图；<br/>  - 调整优先级：将`task_one`优先级改为26、`task_two`改为24，验证“低优先级任务被高优先级打断”的逻辑，记录实验结论。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信”章节，了解`LOS_QueueCreate()`（消息队列）的基本功能，为下次课程铺垫。|1. 实操任务：<br/>  - 修改任务代码：在`task_two`中添加`LOS_TaskDelete()`（删除自身或`task_one`），观察串口日志变化，提交修改后的代码及日志截图；<br/>  - 调整优先级：将`task_one`优先级改为26、`task_two`改为24，验证“低优先级任务被高优先级打断”的逻辑，记录实验结论。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信”章节，了解`LOS_QueueCreate()`（消息队列）的基本功能，为下次课程铺垫。|
|参考资料|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|


|教学环节|教学内容|教师活动|学生活动|设计意图|
|---|---|---|---|---|
|课前|预习（30分钟）|1. 在学习平台上传预习资料：<br/>  - 上次课“双任务Hello World”代码回顾视频；<br/>  - 鸿蒙LiteOS-M任务调度机制图文文档（含抢占式调度示意图）；<br/>2. 发布预习任务：标注`LOS_TaskCreate()`的5个关键参数，记录“优先级0和31为何不能用”的疑问。|1. 观看视频回顾旧知，阅读文档标注重点；<br/>2. 记录预习疑问（如“时间片轮转调度如何触发”），在平台留言互动。|衔接上次课程内容，提前化解基础概念难点，培养自主思考能力。|
|课中|课程介绍（5min）|1. 明确本节课核心目标：掌握任务创建/删除API，理解抢占式调度，认同国产系统优势；<br/>2. 串联课程逻辑：从“多任务运行”到“调度规则”，再到“实际应用”，融入思政目标。|1. 记录学习目标，标注“API错误处理”“调度逻辑”两个重点；<br/>2. 提出对“国产系统应用场景”的好奇（如“鸿蒙在工业设备中如何管理多任务”）。|清晰学习方向，激发对国产技术实际价值的探索兴趣。|
||任务导入（10min）|1. 演示两组对比实验：<br/>  - 实验1：task_one（优先级24）、task_two（25）——task_one打印2次后task_two打印1次；<br/>  - 实验2：故意设错优先级为31——串口打印`LOS_ERRNO_TSK_PRIOR_ERROR`报错；<br/>2. 提问引导：“为什么实验1的任务打印有规律？实验2的错误如何解决？”|1. 观察两组实验的串口日志差异，记录规律；<br/>2. 分组讨论问题，初步关联“优先级”与“任务运行顺序”的关系。|用对比实验直观呈现重难点，通过问题引导聚焦核心矛盾（调度逻辑、错误处理）。|
||知识储备（15min）|1. 分层讲解核心知识：<br/>  - 任务本质：竞争资源的最小单元（类比“工厂里的不同工位”）；<br/>  - 调度机制：抢占式（高优先级“插队”）+时间片轮转（同优先级“轮流来”），结合示意图演示；<br/>  - API解析：`LOS_TaskCreate()`参数（taskID/初始化参数）、返回值（成功`LOS_OK`/失败错误码），`LOS_TaskDelete()`的使用注意（不能删除系统任务）；<br/>2. 思政融入：穿插讲解鸿蒙系统在“华为智能手表”“国产工业传感器”中的任务管理应用，对比国外系统的依赖风险。|1. 绘制“任务调度示意图”，记录API参数表格；<br/>2. 举手提问“同优先级任务如何判断运行顺序”，标记“错误码查询方法”。|用类比降低抽象概念难度，结合实际案例强化思政认知，夯实理论基础。|
||任务导入（5min）|1. 承接知识储备，明确本次实操任务：<br/>  - 在`vendor/lockzhiner/rk2206/sample`下创建`a1_kernal_task`文件夹；<br/>  - 编写多任务代码，修改配置文件，验证“1s/2s打印”效果；<br/>2. 强调实操关键点：`BUILD.gn`的编译目标路径、`Makefile`的库名匹配。|1. 记录实操步骤框架（创建文件夹→写代码→改配置→烧写）；<br/>2. 标注“文件夹路径不能错”“库名必须是task_example”两个易错点。|将理论落地到具体任务，明确实操重点，降低操作失误率。|
||知识储备（10min）|1. 补充实操细节知识：<br/>  - 代码结构：`task_example()`创建任务、`task_one()`/`task_two()`实现循环打印，调用`LOS_Msleep()`控制间隔；<br/>  - 配置文件修改：`BUILD.gn`添加编译目标的语法规则（路径+目标名）、`Makefile`添加库名的格式（`-l+库名`）；<br/>2. 错误预判：演示“路径写错导致编译失败”的提示信息，教学生如何根据日志定位问题。|1. 记录代码模板（如`TSK_INIT_PARAM_S task1 = {0};`的初始化格式）；<br/>2. 模拟“路径多写一个字母”的错误，练习看日志排查。|补充实操中的细节知识，提前预判常见错误，提升问题解决能力。|
||任务实施（40min）|1. 分步演示+巡视指导：<br/>  ① 终端创建`a1_kernal_task`文件夹（`mkdir -p a1_kernal_task`）；<br/>  ② 编写`task_example.c`（含`task_one`/`task_two`，调用`LOS_TaskCreate()`）；<br/>  ③ 修改`BUILD.gn`（添加`./a1_kernal_task:task_example`）和`Makefile`（添加`-ltask_example`）；<br/>  ④ 烧写程序，打开串口软件验证结果；<br/>2. 重点帮扶：针对“配置文件路径错误”“优先级设为0/31报错”等问题，一对一指导排查。|1. 跟随演示逐步操作，每完成一步自我检查（如核对`BUILD.gn`路径）；<br/>2. 遇到错误先对照预习资料排查，无法解决则举手求助；<br/>3. 成功看到预期日志后，拍照记录并尝试修改优先级验证逻辑。|通过“演示+实操”突破重点，针对性指导解决难点，强化动手能力与问题排查能力。|
||任务总结（5min）|1. 流程梳理：用流程图回顾“代码编写→配置修改→编译烧写→结果验证”全步骤；<br/>2. 重难点强化：<br/>  - 优先级规则：0最高、31最低，用户用1-30；<br/>  - 配置关键：`BUILD.gn`目标与`Makefile`库名必须一致；<br/>3. 思政升华：展示国产智能家居设备（搭载鸿蒙+RK2206芯片）的多任务运行场景，强调自主技术的重要性。|1. 补充流程图细节，标记“配置文件关联”“错误码识别”两个易错点；<br/>2. 分享实操心得（如“原来路径多一个斜杠就会编译失败”）。|巩固知识点与实操流程，结合实际应用深化思政认知，形成完整学习闭环。|
|作业|实操+预习|1. 在学习通发布作业：<br/>  - 明确实操作业提交要求（代码命名格式、日志截图需标注关键信息）；<br/>  - 布置预习报告（简述`LOS_QueueCreate()`的作用，不少于200字）；<br/>2. 提示下次课重点：任务通信（消息队列）。|1. 记录作业要求，规划完成时间（实操2小时+预习1小时）；<br/>2. 课后立即回顾本次课代码，为修改任务（添加`LOS_TaskDelete()`）做准备。|通过作业验收实操成果，预习为下次课程铺垫，强化知识的连贯性。|
|课后|资源推送+答疑|1. 上传教学资源：本节课PPT、实操步骤视频、API错误码查询表；<br/>2. 开放答疑通道：24小时内回复学生在平台的代码问题，汇总“优先级配置错误”“路径匹配错误”等高频问题，下次课开篇讲解。|1. 登录学习平台下载资源，对照视频复盘实操过程；<br/>2. 完成作业时遇到问题及时在平台提问，查看同学的疑问及解答。|提供复习支持，及时解决课后问题，通过高频错误汇总优化后续教学。|