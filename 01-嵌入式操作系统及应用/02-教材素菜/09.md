# 福建信息职业技术学院教案（补充完整版）
|课程名称|嵌入式操作系统及应用|嵌入式操作系统及应用|授课日期||
|---|---|---|---|---|
|班    级|物联网2411|物联网2412|物联网2411|物联网2412|
|课堂类型|一体化|一体化|一体化|一体化|
|教    材|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|OpenHarmony嵌入式系统原理与应用——基于RK2206芯片|
|章节名称|基础开发<br/>定时器|基础开发<br/>定时器|基础开发<br/>定时器|基础开发<br/>定时器|
|**目的要求**|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M软件定时器的本质（基于Tick时钟中断、回调函数触发）及与硬件定时器的区别；<br/>  - 掌握定时器核心API（`LOS_SwtmrCreate()`创建、`LOS_SwtmrStart()`启动、`LOS_SwtmrStop()`停止、`LOS_SwtmrDelete()`删除）的参数、返回值及使用场景；<br/>  - 明确定时器关键属性（超时时间`interval`、模式`mode`，如周期性`LOS_SWTMR_MODE_PERIOD`）。<br/>2. 技能目标：<br/>  - 能在开发板上创建`a3_kernel_timer`文件夹，编写定时器代码（含回调函数）；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证“1s/2s打印”效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙软件定时器在国产嵌入式设备（如智能水表、工业监控模块）的应用案例，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M软件定时器的本质（基于Tick时钟中断、回调函数触发）及与硬件定时器的区别；<br/>  - 掌握定时器核心API（`LOS_SwtmrCreate()`创建、`LOS_SwtmrStart()`启动、`LOS_SwtmrStop()`停止、`LOS_SwtmrDelete()`删除）的参数、返回值及使用场景；<br/>  - 明确定时器关键属性（超时时间`interval`、模式`mode`，如周期性`LOS_SWTMR_MODE_PERIOD`）。<br/>2. 技能目标：<br/>  - 能在开发板上创建`a3_kernel_timer`文件夹，编写定时器代码（含回调函数）；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证“1s/2s打印”效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙软件定时器在国产嵌入式设备（如智能水表、工业监控模块）的应用案例，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M软件定时器的本质（基于Tick时钟中断、回调函数触发）及与硬件定时器的区别；<br/>  - 掌握定时器核心API（`LOS_SwtmrCreate()`创建、`LOS_SwtmrStart()`启动、`LOS_SwtmrStop()`停止、`LOS_SwtmrDelete()`删除）的参数、返回值及使用场景；<br/>  - 明确定时器关键属性（超时时间`interval`、模式`mode`，如周期性`LOS_SWTMR_MODE_PERIOD`）。<br/>2. 技能目标：<br/>  - 能在开发板上创建`a3_kernel_timer`文件夹，编写定时器代码（含回调函数）；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证“1s/2s打印”效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙软件定时器在国产嵌入式设备（如智能水表、工业监控模块）的应用案例，强化民族自豪感与科技报国情怀。|1. 知识目标：<br/>  - 理解OpenHarmony LiteOS-M软件定时器的本质（基于Tick时钟中断、回调函数触发）及与硬件定时器的区别；<br/>  - 掌握定时器核心API（`LOS_SwtmrCreate()`创建、`LOS_SwtmrStart()`启动、`LOS_SwtmrStop()`停止、`LOS_SwtmrDelete()`删除）的参数、返回值及使用场景；<br/>  - 明确定时器关键属性（超时时间`interval`、模式`mode`，如周期性`LOS_SWTMR_MODE_PERIOD`）。<br/>2. 技能目标：<br/>  - 能在开发板上创建`a3_kernel_timer`文件夹，编写定时器代码（含回调函数）；<br/>  - 独立修改`BUILD.gn`和`Makefile`完成编译配置，烧写程序后通过串口验证“1s/2s打印”效果。<br/>3. 素养目标：<br/>  - 通过鸿蒙软件定时器在国产嵌入式设备（如智能水表、工业监控模块）的应用案例，强化民族自豪感与科技报国情怀。|
|**学情分析**|1. 基础：已掌握任务管理开发流程（文件创建、编译烧写），具备C语言函数/指针基础，但对“定时器与任务的区别”“回调函数触发逻辑”认知空白；<br/>2. 难点：易混淆`LOS_SwtmrCreate()`的`mode`参数（如周期性与单次模式）、`interval`单位（毫秒），以及“定时器队列先进先出”的触发规则；<br/>3. 需求：需通过“任务与定时器对比实验”“错误演示（如设错mode）”降低抽象难度，强化API参数与配置文件的关联性认知。|1. 基础：已掌握任务管理开发流程（文件创建、编译烧写），具备C语言函数/指针基础，但对“定时器与任务的区别”“回调函数触发逻辑”认知空白；<br/>2. 难点：易混淆`LOS_SwtmrCreate()`的`mode`参数（如周期性与单次模式）、`interval`单位（毫秒），以及“定时器队列先进先出”的触发规则；<br/>3. 需求：需通过“任务与定时器对比实验”“错误演示（如设错mode）”降低抽象难度，强化API参数与配置文件的关联性认知。|1. 基础：已掌握任务管理开发流程（文件创建、编译烧写），具备C语言函数/指针基础，但对“定时器与任务的区别”“回调函数触发逻辑”认知空白；<br/>2. 难点：易混淆`LOS_SwtmrCreate()`的`mode`参数（如周期性与单次模式）、`interval`单位（毫秒），以及“定时器队列先进先出”的触发规则；<br/>3. 需求：需通过“任务与定时器对比实验”“错误演示（如设错mode）”降低抽象难度，强化API参数与配置文件的关联性认知。|1. 基础：已掌握任务管理开发流程（文件创建、编译烧写），具备C语言函数/指针基础，但对“定时器与任务的区别”“回调函数触发逻辑”认知空白；<br/>2. 难点：易混淆`LOS_SwtmrCreate()`的`mode`参数（如周期性与单次模式）、`interval`单位（毫秒），以及“定时器队列先进先出”的触发规则；<br/>3. 需求：需通过“任务与定时器对比实验”“错误演示（如设错mode）”降低抽象难度，强化API参数与配置文件的关联性认知。|
|**重 难 点<br/>分    析**|1. 重点：<br/>  - API应用：`LOS_SwtmrCreate()`参数配置（`interval=1000/2000`、`mode=LOS_SWTMR_MODE_PERIOD`、回调函数`timer1_timeout`/`timer2_timeout`、定时器ID）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a3_kernel_timer:timer_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltimer_example`；<br/>  - 结果验证：通过串口观察“Timer1（1s/次）、Timer2（2s/次）”的交替打印，理解定时器队列触发规则。<br/>2. 难点：<br/>  - 定时器原理：软件定时器基于Tick时钟中断的工作逻辑（类比“闹钟按固定间隔响铃”）；<br/>  - API错误处理：识别`LOS_SwtmrCreate()`的失败返回值（如`LOS_ERRNO_SWTMR_MODE_INVALID`代表模式错误）；<br/>  - 定时器与任务的区别：任务是独立运行单元，定时器是“到点触发回调”的被动机制。|1. 重点：<br/>  - API应用：`LOS_SwtmrCreate()`参数配置（`interval=1000/2000`、`mode=LOS_SWTMR_MODE_PERIOD`、回调函数`timer1_timeout`/`timer2_timeout`、定时器ID）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a3_kernel_timer:timer_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltimer_example`；<br/>  - 结果验证：通过串口观察“Timer1（1s/次）、Timer2（2s/次）”的交替打印，理解定时器队列触发规则。<br/>2. 难点：<br/>  - 定时器原理：软件定时器基于Tick时钟中断的工作逻辑（类比“闹钟按固定间隔响铃”）；<br/>  - API错误处理：识别`LOS_SwtmrCreate()`的失败返回值（如`LOS_ERRNO_SWTMR_MODE_INVALID`代表模式错误）；<br/>  - 定时器与任务的区别：任务是独立运行单元，定时器是“到点触发回调”的被动机制。|1. 重点：<br/>  - API应用：`LOS_SwtmrCreate()`参数配置（`interval=1000/2000`、`mode=LOS_SWTMR_MODE_PERIOD`、回调函数`timer1_timeout`/`timer2_timeout`、定时器ID）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a3_kernel_timer:timer_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltimer_example`；<br/>  - 结果验证：通过串口观察“Timer1（1s/次）、Timer2（2s/次）”的交替打印，理解定时器队列触发规则。<br/>2. 难点：<br/>  - 定时器原理：软件定时器基于Tick时钟中断的工作逻辑（类比“闹钟按固定间隔响铃”）；<br/>  - API错误处理：识别`LOS_SwtmrCreate()`的失败返回值（如`LOS_ERRNO_SWTMR_MODE_INVALID`代表模式错误）；<br/>  - 定时器与任务的区别：任务是独立运行单元，定时器是“到点触发回调”的被动机制。|1. 重点：<br/>  - API应用：`LOS_SwtmrCreate()`参数配置（`interval=1000/2000`、`mode=LOS_SWTMR_MODE_PERIOD`、回调函数`timer1_timeout`/`timer2_timeout`、定时器ID）；<br/>  - 编译配置：修改`vendor/lockzhiner/rk2206/sample/BUILD.gn`添加`./a3_kernel_timer:timer_example`，修改`device/lockzhiner/rk2206/sdk_liteos/Makefile`添加`-ltimer_example`；<br/>  - 结果验证：通过串口观察“Timer1（1s/次）、Timer2（2s/次）”的交替打印，理解定时器队列触发规则。<br/>2. 难点：<br/>  - 定时器原理：软件定时器基于Tick时钟中断的工作逻辑（类比“闹钟按固定间隔响铃”）；<br/>  - API错误处理：识别`LOS_SwtmrCreate()`的失败返回值（如`LOS_ERRNO_SWTMR_MODE_INVALID`代表模式错误）；<br/>  - 定时器与任务的区别：任务是独立运行单元，定时器是“到点触发回调”的被动机制。|
|信息化应用方法|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|网络教学平台、视频、开发板，开展现场教学，通过项目任务驱动进行混合式教学；|
|思政元素<br/>融合设计|思政元素|融入方式|融入方式|融入方式|
||民族自豪感、<br/>科技报国情怀|1. 讲解鸿蒙软件定时器在国产智能设备中的应用：如智能水表（定时上传数据）、工业监控模块（定时采集传感器数据），说明其对设备低功耗、高稳定性的支撑；<br/>2. 对比国外嵌入式系统（如FreeRTOS）的定时器功能，强调鸿蒙系统“API本土化适配、源码自主可控”的优势，引导学生认同国产软件生态。|1. 讲解鸿蒙软件定时器在国产智能设备中的应用：如智能水表（定时上传数据）、工业监控模块（定时采集传感器数据），说明其对设备低功耗、高稳定性的支撑；<br/>2. 对比国外嵌入式系统（如FreeRTOS）的定时器功能，强调鸿蒙系统“API本土化适配、源码自主可控”的优势，引导学生认同国产软件生态。|1. 讲解鸿蒙软件定时器在国产智能设备中的应用：如智能水表（定时上传数据）、工业监控模块（定时采集传感器数据），说明其对设备低功耗、高稳定性的支撑；<br/>2. 对比国外嵌入式系统（如FreeRTOS）的定时器功能，强调鸿蒙系统“API本土化适配、源码自主可控”的优势，引导学生认同国产软件生态。|
|**作业布置**|1. 实操任务：<br/>  - 修改定时器代码：将Timer1改为单次模式（`LOS_SWTMR_MODE_ONCE`），观察串口日志变化；在`timer2_timeout`中添加`LOS_SwtmrStop(timer_id1)`，验证“停止其他定时器”的效果，提交代码及日志截图；<br/>  - 调整周期：将Timer1改为1.5秒（`interval=1500`），Timer2改为3秒，记录打印规律。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信-消息队列”章节，了解`LOS_QueueCreate()`的基本功能，思考“定时器如何与消息队列配合使用”。|1. 实操任务：<br/>  - 修改定时器代码：将Timer1改为单次模式（`LOS_SWTMR_MODE_ONCE`），观察串口日志变化；在`timer2_timeout`中添加`LOS_SwtmrStop(timer_id1)`，验证“停止其他定时器”的效果，提交代码及日志截图；<br/>  - 调整周期：将Timer1改为1.5秒（`interval=1500`），Timer2改为3秒，记录打印规律。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信-消息队列”章节，了解`LOS_QueueCreate()`的基本功能，思考“定时器如何与消息队列配合使用”。|1. 实操任务：<br/>  - 修改定时器代码：将Timer1改为单次模式（`LOS_SWTMR_MODE_ONCE`），观察串口日志变化；在`timer2_timeout`中添加`LOS_SwtmrStop(timer_id1)`，验证“停止其他定时器”的效果，提交代码及日志截图；<br/>  - 调整周期：将Timer1改为1.5秒（`interval=1500`），Timer2改为3秒，记录打印规律。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信-消息队列”章节，了解`LOS_QueueCreate()`的基本功能，思考“定时器如何与消息队列配合使用”。|1. 实操任务：<br/>  - 修改定时器代码：将Timer1改为单次模式（`LOS_SWTMR_MODE_ONCE`），观察串口日志变化；在`timer2_timeout`中添加`LOS_SwtmrStop(timer_id1)`，验证“停止其他定时器”的效果，提交代码及日志截图；<br/>  - 调整周期：将Timer1改为1.5秒（`interval=1500`），Timer2改为3秒，记录打印规律。<br/>2. 预习任务：<br/>  - 阅读参考资料中“鸿蒙内核任务通信-消息队列”章节，了解`LOS_QueueCreate()`的基本功能，思考“定时器如何与消息队列配合使用”。|
|参考资料|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|1.《OpenHarmony嵌入式系统原理与应用——基于RK2206芯片》<br/>2. https://gitee.com/Lockzhiner-Electronics/lockzhiner-rk2206-openharmony3.0lts.git|


|教学环节|教学内容|教师活动|学生活动|设计意图|
|---|---|---|---|---|
|课前|预习（30分钟）|1. 在学习平台上传预习资料：<br/>  - 任务管理与定时器的对比文档（含核心区别表格）；<br/>  - 鸿蒙软件定时器API参数图解、`LOS_SwtmrCreate()`错误码查询表；<br/>2. 发布预习任务：标注`LOS_SwtmrCreate()`的5个参数含义，记录“软件定时器为何依赖Tick时钟”的疑问。|1. 阅读资料，绘制“任务vs定时器”对比表格；<br/>2. 记录预习疑问（如“单次模式与周期性模式的区别”），在平台留言。|衔接旧知（任务管理），提前化解定时器基础概念难点，培养自主学习能力。|
|课中|课程介绍（5min）|1. 明确本节课目标：掌握定时器API与开发流程，理解软件定时器工作原理，认同国产系统优势；<br/>2. 串联课程逻辑：从“定时需求”到“定时器实现”，再到“实际应用”，融入思政目标。|1. 记录核心目标，标注“API参数”“定时器原理”两个重点；<br/>2. 提出对“国产设备定时场景”的好奇（如“智能电表如何定时上传数据”）。|清晰学习方向，激发对定时器实际应用价值的兴趣。|
||任务导入（10min）|1. 演示两组对比实验：<br/>  - 实验1：Timer1（1s/周期性）、Timer2（2s/周期性）——交替打印；<br/>  - 实验2：故意将`mode`设为无效值——串口打印`LOS_ERRNO_SWTMR_MODE_INVALID`报错；<br/>2. 提问引导：“为什么实验1的打印有规律？实验2的错误如何解决？定时器和之前学的任务有何不同？”|1. 观察日志，记录两组实验差异；<br/>2. 分组讨论问题，初步关联“mode参数”“错误码”与“定时器逻辑”。|用对比实验直观呈现重难点，通过问题引导聚焦核心矛盾（参数配置、错误处理）。|
||知识储备（15min）|1. 分层讲解核心知识：<br/>  - 定时器本质：基于Tick时钟中断的软件模拟（类比“学校打铃系统”），与硬件定时器的区别（硬件数量有限，软件可多创建）；<br/>  - API解析：`LOS_SwtmrCreate()`参数（`interval`毫秒、`mode`模式、`handler`回调函数等）、返回值；`LOS_SwtmrStart()`/`Stop()`/`Delete()`的作用；<br/>  - 队列规则：定时器按超时时间排序，短周期优先触发（先进先出）；<br/>2. 思政融入：穿插讲解鸿蒙定时器在国产智能水表、工业传感器中的应用，对比国外系统的适配难度。|1. 记录API参数表格，绘制“定时器工作流程图”；<br/>2. 举手提问“回调函数何时执行”，标记“错误码查询方法”。|用类比降低抽象难度，结合案例强化思政认知，夯实理论基础。|
||任务导入（5min）|1. 承接知识储备，明确实操任务：<br/>  - 在`vendor/lockzhiner/rk2206/sample`下创建`a3_kernel_timer`文件夹；<br/>  - 编写定时器代码，修改配置文件，验证“1s/2s打印”效果；<br/>2. 强调实操关键点：`BUILD.gn`的编译目标路径、`Makefile`的库名匹配。|1. 记录实操步骤（创建文件夹→写代码→改配置→烧写）；<br/>2. 标注“文件夹名必须是a3_kernel_timer”“库名是timer_example”两个易错点。|将理论落地到具体任务，明确实操重点，降低操作失误率。|
||知识储备（10min）|1. 补充实操细节知识：<br/>  - 代码结构：`timer_example()`创建并启动定时器、`timer1_timeout()`/`timer2_timeout()`为回调函数；<br/>  - 配置文件修改：`BUILD.gn`添加编译目标的语法（路径+目标名）、`Makefile`添加库名的格式（`-l+库名`）；<br/>2. 错误预判：演示“文件夹路径写错导致编译失败”的日志，教学生定位问题。|1. 记录代码模板（如`LOS_SwtmrCreate(1000, LOS_SWTMR_MODE_PERIOD, ...)`）；<br/>2. 模拟“库名少写字母”的错误，练习看日志排查。|补充实操细节，提前预判常见错误，提升问题解决能力。|
||任务实施（40min）|1. 分步演示+巡视指导：<br/>  ① 终端创建`a3_kernel_timer`文件夹（`mkdir -p a3_kernel_timer`）；<br/>  ② 编写`timer_example.c`（含回调函数，调用`LOS_SwtmrCreate()`/`Start()`）；<br/>  ③ 修改`BUILD.gn`（添加`./a3_kernel_timer:timer_example`）和`Makefile`（添加`-ltimer_example`）；<br/>  ④ 烧写程序，打开串口验证结果；<br/>2. 重点帮扶：针对“配置文件路径错误”“mode参数设错”等问题，一对一指导。|1. 跟随演示操作，每步自我检查（如核对`BUILD.gn`路径）；<br/>2. 遇错先查资料，无法解决则求助；<br/>3. 成功后尝试修改`mode`为单次模式，观察日志变化。|通过“演示+实操”突破重点，针对性指导解决难点，强化动手能力。|
||任务总结（5min）|1. 流程梳理：用流程图回顾“代码编写→配置修改→编译烧写→结果验证”全步骤；<br/>2. 重难点强化：<br/>  - 参数规则：`interval`是毫秒，`mode`选`LOS_SWTMR_MODE_PERIOD`（周期性）或`ONCE`（单次）；<br/>  - 配置关键：`BUILD.gn`与`Makefile`的库名、路径一致；<br/>3. 思政升华：展示国产工业监控模块（搭载鸿蒙+RK2206）的定时采集场景，强调自主技术的重要性。|1. 补充流程图细节，标记“API参数”“配置关联”两个易错点；<br/>2. 分享实操心得（如“原来回调函数不需要主动调用”）。|巩固知识点与流程，结合应用深化思政认知，形成学习闭环。|
|作业|实操+预习|1. 在学习通发布作业：<br/>  - 明确实操作业提交要求（代码命名、日志截图标注）；<br/>  - 布置预习报告（简述`LOS_QueueCreate()`作用，不少于200字）；<br/>2. 提示下次课重点：任务通信（消息队列）。|1. 记录作业要求，规划完成时间；<br/>2. 课后回顾代码，为修改任务做准备。|验收实操成果，预习为后续课程铺垫，强化知识连贯性。|
|课后|资源推送+答疑|1. 上传教学资源：本节课PPT、实操视频、API错误码表；<br/>2. 开放答疑通道：24小时内回复问题，汇总“mode参数错误”“路径匹配错”等高频问题，下次课讲解。|1. 下载资源复盘实操；<br/>2. 完成作业时遇问题及时提问，查看同学解答。|提供复习支持，及时解决问题，优化后续教学。|